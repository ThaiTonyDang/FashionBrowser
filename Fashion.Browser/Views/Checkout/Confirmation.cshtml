@using FashionBrowser.Domain.ViewModels;
@using FashionBrowser.Utilities;
@model CheckoutItemViewModel;
@{
	Layout = "_Layout";
}

<partial name="_Alert" />

<section class="blog-banner-area" id="category">
	<div class="container h-100">
		<div class="blog-banner">
			<div class="text-center">
				<h1>Order Confirmation</h1>
				<nav aria-label="breadcrumb" class="banner-breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="#">Home</a></li>
						<li class="breadcrumb-item active" aria-current="page">Shop Category</li>
					</ol>
				</nav>
			</div>
		</div>
	</div>
</section>

<ol class="breadcrumb">
	<li class="breadcrumb-item">
		<a href="~/Home/Index" class="link" style="color:#001489; font-weight:600">
			Home
		</a>
	</li>
	<li class="breadcrumb-item">
		<a href="~/shoppingcart/" style="color:#001489; font-weight:600">
			Shopping Cart
		</a>
	</li>
	<li class="breadcrumb-item">
		<a href="~/Checkout/Index" style="color:#001489; font-weight:600">
			Checkout
		</a>
	</li>
	<li class="breadcrumb-item">Confirmation</li>
</ol>

<section class="order_details section-margin--small">
	<div class="container">
		<p class="text-center billing-alert">Thank you. Your order has been received.</p>
		<div class="row mb-5">
			<div class="col-md-6 col-xl-6 mb-4 mb-xl-0">
				<div class="confirmation-card">
					<h3 class="billing-title">Order Info</h3>
					<table class="order-rable">
						<tbody>
							<tr>
								<td>Order number</td>
								<td>: @Model.OrderItem.Id.ToString().Substring(0, 5)</td>
							</tr>
							<tr>
								<td>Date</td>
								<td>: @Model.OrderItem.OrderDate.ToString("dddd, dd MMMM yyyy")</td>
							</tr>
							<tr>
								<td>Time Order</td>
								<td>: @Model.OrderItem.OrderDate.ToLongTimeString()</td>
							</tr>
							<tr>
								<td>Total</td>
								<td>: @Model.CartViewModel.Total.GetPriceFormat()</td>
							</tr>
							<tr>
								@if (Model.IsCODPay)
								{
									<td>Payment method</td>
									<td>: COD</td>
								}
								else
								{
									<td>Payment method</td>
									<td>: Credit Card</td>
								}
								
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-6 col-xl-6 mb-4 mb-xl-0">
				<div class="confirmation-card">
					<h3 class="billing-title">Shipping Address</h3>
					<table class="order-rable">
						<tbody>
							<tr>
								<td>Name Customer</td>
								<td>: @Model.CustomerItemViewModel.Name</td>
							</tr>
							<tr>
								<td>Address</td>
								<td>: @Model.CustomerItemViewModel.Address</td>
							</tr>
							<tr>
								<td>City</td>
								<td>: @Model.CustomerItemViewModel.City</td>
							</tr>
							<tr>
								<td>Phone</td>
								<td>: @Model.CustomerItemViewModel.Phone</td>
							</tr>
							<tr>
								<td>Email</td>
								<td>:@Model.CustomerItemViewModel.Email</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="order_details_table">
			<h2>Order Details</h2>
			<div class="table-responsive">
				<table class="table">
					<thead>
						<tr>
							<th scope="col">Product</th>
							<th scope="col">Image</th>
							<th scope="col">Unit Price</th>
							<th scope="col">Quantity</th>
							<th scope="col">Total</th>
						</tr>
					</thead>
					<tbody>
						@{
							decimal shipping = 5;
						}
						@foreach (var cartItem in Model.CartViewModel.ListCartItem)
						{
							<tr>
								<td>
									<p>@cartItem.Product.Name</p>
								</td>
								<td>
									<img class="card-img" src="@cartItem.Product.ImageUrl" style="width:50px; height:50px" alt="">
								</td>
								<td>
									<p>@cartItem.Product.Price.GetPriceFormat()</p>
								</td>
								<td>
									<h5>x @cartItem.Quantity</h5>
								</td>
								<td>
									<p>@cartItem.Price.GetPriceFormat()</p>
								</td>
							</tr>
						}
						
						<tr>
							<td>
								<h4>Subtotal</h4>
							</td>
							<td>
								<h5></h5>
							</td>
							<td>
								<p>@Model.CartViewModel.Total.GetPriceFormat()</p>
							</td>
						</tr>
						<tr>
							<td>
								<h4>Shipping</h4>
							</td>
							<td>
								<h5></h5>
							</td>
							<td>
								<p>Flat rate: @shipping.GetPriceFormat()</p>
							</td>
						</tr>
						<tr>
							<td>
								<h4>Total</h4>
							</td>
							<td>
								<h5></h5>
							</td>
							@{
								var total = (Model.CartViewModel.Total + shipping).GetPriceFormat();
							}
							<td>

								<h4>@total</h4>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</section>